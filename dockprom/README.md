# Как запустить локально графану с дашбордами, графаной и прочими сервисами:

1. В файле **prometheus/prometheus.yml** создаем или меняем под себя существующую job для наших экспортеров.
Как правило таргет экспортера в контейнерах имеет вид: ```<container_name>:<exporter_port>```
**container_name** можем посмотреть через ```docker ps``` на машине где запущены контейнеры
**exporter_port** мы должны знать, но догадаться может помочь ```netstat -tulnp```/```ps -edf | grep <exporter_name>``` или сам конфиг экспортера внутри контейнера с экспортером
В **targets** перечисляем наши контейнеры с экспортерами
2. В **grafana/provisioning/dashboards** можем добавить свой дашборд, либо импортировать его после
3. В файле ***docker_compose.yml*** правим под нас параметры:
**networks** - я ставлю external (уже существующую), но для этого ее надо предварительно создать либо через ```docker network create my_network```, либо молекулой. Имя сети меняем во всем файле всех сервисов
Если хотите создать сеть, то комментируете внешнюю и расскомментируете создание:
```
networks:
  molecule_docker_network:
    driver: bridge
```
4. Если поставили networks external предварительно запускаем сеть или наши контейнеры molecule ролей для тестов
5. Запускаем сервисы из docker-compose через файл или командой ```docker compose up -d``` находясь в папке с файлом
6. Благодаря caddy сервисы должны быть доступны по следующим url:
http://localhost:9090 - prometheus admin/admin
http://localhost:3000 - grafana admin/admin
в docker compose также есть:
victoria-logs
alertmanager
pushgateway
и экспортер для прометея и caddy

# ВАЖНО
- чтобы контейнеры с экспортерами и контейнеры мониторинга были в одной сети
- указывать правильные порты для экспортеров **prometheus.yml**